(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequirea886;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){r[e]=n},n.parcelRequirea886=a);var o=a("cuInp"),i=a("1vgyn"),c=a("yrqZm"),l=a("jLXMA"),u=a("5BN27"),d=a("8lwbT"),s=a("1XFga"),p=a("foMWJ"),f=a("k4gOl"),m=a("226dB");a("jDHv3");var g=a("gVpKh"),v=a("eUasX"),h=a("2el8I"),y=a("hZbar"),x=a("9iuQf"),T=a("jcs3P"),S=a("6HRK6"),E=a("4gTGP"),w=a("64CI4"),b=a("kAFed"),k=a("bMiEi"),A=a("kp2lL"),P=a("3ljdI"),L=a("6hDva"),H=a("6BByg"),I=a("lP5so"),C=a("5k7fc"),B=a("dfTp4"),F=a("5pcP7"),O=a("9yR5l"),D=a("1Jwz2"),N=(o=a("cuInp"),c=a("yrqZm"),u=a("5BN27"),x=a("9iuQf"),o=a("cuInp"),u=a("5BN27"),a("5kl7o"));function j(){var e=o.taggedTemplateLiteral(["\n  cursor: pointer;\n  width: 24px;\n  height: 24px;\n  transition: background-color 200ms ease;\n  background-color: "," !important;\n  :hover {\n    background-color: #444444;\n    svg {\n      fill: white;\n    }\n  }\n  svg {\n    fill: ",";\n    transition: fill 200ms ease;\n    position: relative;\n    ","\n    ","\n  }\n"]);return j=function(){return e},e}var R=function(e){return e},_=u.default(N.Circle)(te||(te=R(j(),0,0,0,0)),(function(e){return e.$isExpanded?"#000":"#333"}),(function(e){return e.$isExpanded?"white":"#666666"}),(function(e){return e.top?"top: ".concat(e.top,"px;"):""}),(function(e){return e.right?"right: ".concat(e.right,"px;"):""})),M=(N=a("5kl7o"),B=a("dfTp4"),a("dfzUo"));function j(){var e=o.taggedTemplateLiteral(["\n  background-color: #222222;\n  padding: 10px 16px;\n  border-bottom: 1px solid #323232;\n  height: 46px;\n  opacity: ",";\n  position: absolute;\n"]);return j=function(){return e},e}function W(){var e=o.taggedTemplateLiteral(["\n  display: flex;\n  margin-left: 10px;\n  > * {\n    margin-right: 10px;\n  }\n"]);return W=function(){return e},e}function K(){var e=o.taggedTemplateLiteral(["\n  width: 24px;\n  height: 24px;\n"]);return K=function(){return e},e}R=function(e){return e};var V=u.default(M.Row).attrs({justify:"space-between"})(te||(te=R(j(),0)),(function(e){var n;return null!==(n=e.opacity)&&void 0!==n?n:"1"})),U=u.default.div(re||(re=R(W()))),q=u.default.div(ae||(ae=R(K()))),X=function(n){var t=n.onBackClick,r=n.totalSteps,a=n.currentStepIndex,o=n.isHidden,i=n.showBackButtonOnFirstStep||0!==a;return e(c).createElement(V,{opacity:o?0:1},i?e(c).createElement(_,{right:1,onClick:t},e(c).createElement(B.LeftChevronIcon,null)):e(c).createElement(q,null),e(c).createElement(U,null,x.range(r).map((function(n){var t=n<=a?"#4E44CE":"#333";return e(c).createElement(N.Circle,{key:n,diameter:12,color:t})}))),e(c).createElement(q,null))},Z=a("k0p5K"),z=(o=a("cuInp"),c=a("yrqZm"),u=a("5BN27"),a("juw1O")),Q=(B=a("dfTp4"),a("7k05x"));function j(){var e=o.taggedTemplateLiteral(["\n  position: relative;\n  width: 100%;\n"]);return j=function(){return e},e}function W(){var e=o.taggedTemplateLiteral(["\n  width: 11px;\n  margin-top: 1px;\n  margin-right: 8px;\n  svg {\n    fill: #aaa;\n  }\n"]);return W=function(){return e},e}R=function(e){return e};var G=u.default(z.ListboxInput)(te||(te=R(j()))),J=u.default.div(re||(re=R(W()))),$=function(n){var t,r=n.value,a=n.placeholderText,o=n.options,i=n.onChange,l=o.map((function(e){return e.value})),u=0===o.length,d=null===(t=o.find((function(e){return e.value===r})))||void 0===t?void 0:t.displayValue;return e(c).createElement(G,{value:null!=r?r:"__none",onChange:function(e){return i(e,l.indexOf(e))},tabIndex:0,disabled:u},(function(){return e(c).createElement(e(c).Fragment,null,e(c).createElement(Q.SelectButton,{arrow:e(c).createElement(J,null,e(c).createElement(B.DownChevronIcon,null))},void 0===r?a:d),!u&&e(c).createElement(Q.SelectPopover,null,e(c).createElement(Q.SelectList,null,o.map((function(n){var t;return e(c).createElement(Q.SelectItem,{key:n.value,value:n.value},null!==(t=n.displayValue)&&void 0!==t?t:n.value)})))))}))},Y=a("5XjAp");function j(){var e=o.taggedTemplateLiteral(["\n  width: 400px;\n  height: 450px;\n  background-color: #222222;\n  border: 1px solid #323232;\n  box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3);\n  border-radius: 8px;\n  position: relative;\n  overflow: hidden;\n"]);return j=function(){return e},e}function W(){var e=o.taggedTemplateLiteral(["\n  > * {\n    margin-bottom: 10px;\n  }\n  margin-top: 27px;\n"]);return W=function(){return e},e}function K(){var e=o.taggedTemplateLiteral(["\n  margin-top: 46px;\n"]);return K=function(){return e},e}function ee(){var e=o.taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  label {\n    color: #999;\n  }\n"]);return ee=function(){return e},e}function ne(){var e=o.taggedTemplateLiteral(["\n  padding: 40px 20px 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 100%;\n  overflow: auto;\n"]);return ne=function(){return e},e}R=function(e){return e};var te,re,ae,oe,ie,ce=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))};w.telemetry.init();var le=u.default.main(te||(te=R(j()))),ue=u.default.section(re||(re=R(W()))),de=u.default(D.IconHeader)(ae||(ae=R(K()))),se=u.default.div(oe||(oe=R(ee()))),pe=function(){var n=new URLSearchParams(f.useLocation().search).get("permission");return e(c).createElement(e(c).Fragment,null,e(c).createElement(A.ThemedGlobalStyle,{backgroundColor:"#2C2D30"}),e(c).createElement(F.FullPageHeader,null),e(c).createElement(P.HardwareWalletProvider,null,e(c).createElement(C.OnboardingAndConnectHardwareErrorBoundary,null,n?e(c).createElement(le,null,e(c).createElement(ge,{onFinish:function(){return window.close()},pushStep:y.NOOP,popStep:y.NOOP})):e(c).createElement(fe,null))))},fe=function(){var n=o.slicedToArray(c.useState([]),2),t=n[0],r=n[1],a=p.usePreviousDistinct(t,(function(e,n){return(null==e?void 0:e.length)===n.length})),i=x.getLast(t),l=function(e){r((function(n){return d.default(n,(function(n){n.push(e)}))}))},u=function(){r((function(e){return d.default(e,(function(e){e.pop()}))}))};c.useEffect((function(){r([e(c).createElement(ge,{pushStep:l,popStep:u})])}),[]);var f=t.length,m=t.length>(null!=a?a:[]).length,g=0===(null==a?void 0:a.length),v={initial:{x:g?0:m?150:-150,opacity:g?1:0},animate:{x:0,opacity:1},exit:{opacity:0},transition:{duration:.2}};return e(c).createElement(le,null,e(c).createElement(X,{totalSteps:3,onBackClick:u,currentStepIndex:f-1}),e(c).createElement(s.AnimatePresence,{exitBeforeEnter:!0},e(c).createElement(s.motion.div,Object.assign({style:{height:"100%"},key:"".concat(t.length,"_").concat(null==a?void 0:a.length)},v),i)))},me=u.default.div(ie||(ie=R(ne()))),ge=function(n){var t,r,a=g.useTranslation().t,o=P.useLedgerTransport(),i=o.ledgerTransportState,l=o.transport,u=o.getPermission,d=O.ConfirmationIconType.Default,s=e(c).createElement(Z.SpinnerIcon,null),p=a("commandContinue"),f=!1,m=y.NOOP;switch(i){case P.LedgerTransportState.Searching:t=a("connectHardwareSearchingPrimaryText"),r=a("connectHardwareSearchingSecondaryText"),f=!0;break;case P.LedgerTransportState.NeedsPermission:s=e(c).createElement(B.AddIcon,null),t=a("connectHardwareNeedsPermissionPrimaryText"),r=a("connectHardwareNeedsPermissionSecondaryText"),m=u;break;case P.LedgerTransportState.WaitingForPermission:t=a("connectHardwareWaitingForPermissionPrimaryText"),r=a("connectHardwareWaitingForPermissionSecondaryText"),f=!0;break;case P.LedgerTransportState.WaitingForApplication:s=e(c).createElement(B.SolanaIcon,null),t=a("connectHardwareWaitingForApplicationPrimaryText"),r=a("connectHardwareWaitingForApplicationSecondaryText"),f=!0;break;case P.LedgerTransportState.Connected:d=O.ConfirmationIconType.Success,t=a("connectHardwareConnectedPrimaryText"),r=a("connectHardwareConnectedSecondaryText"),m=function(){if(!l)throw new Error("Transport is missing");n.onFinish?n.onFinish():n.pushStep(e(c).createElement(he,Object.assign({transport:l},n)))};break;case P.LedgerTransportState.Failed:d=O.ConfirmationIconType.Failure,t=a("connectHardwareFailedPrimaryText"),r=a("connectHardwareFailedSecondaryText"),p=a("commandRetry"),m=u}return e(c).createElement(me,null,e(c).createElement(de,{icon:e(c).createElement(O.ConfirmationIcon,{defaultIcon:s,type:d}),primaryText:t,secondaryText:r,headerStyle:D.IconHeaderStyle.Large}),e(c).createElement(I.Button,{onClick:m,theme:"primary",disabled:f},p))},ve=[h.DerivationPathType.Bip44RootSolana,h.DerivationPathType.Bip44Solana,h.DerivationPathType.Bip44ChangeSolana],he=function(n){var t,r=g.useTranslation().t,a=o.slicedToArray(c.useState(0),2),l=a[0],u=a[1],s=o.slicedToArray(c.useState(void 0),2),p=s[0],f=s[1],A=o.slicedToArray(c.useState([]),2),P=A[0],H=A[1],C=o.slicedToArray(c.useState({}),2),F=C[0],O=C[1],N=o.slicedToArray(c.useState(!1),2),j=N[0],R=N[1],_=null===(t=L.useFetchConnection())||void 0===t?void 0:t.data,M=null==_?void 0:_.connection,W=o.slicedToArray(b.useStorage(m.StorageKeys.AccountMetas,[]),3),K=W[0],V=W[1],U=W[2],q=c.useMemo((function(){var e=K.filter((function(e){return e.type===h.AccountType.Ledger})).map((function(e){return e.publicKey.toString()}));return P.filter((function(n){return!e.includes(n.toString())}))}),[P,K]),X=void 0!==l?ve[l]:void 0,Z=c.useMemo((function(){return X?X===h.DerivationPathType.Bip44RootSolana?[S.solanaDerivationPath(0,0,h.DerivationPathType.Bip44RootSolana)]:x.range(10).map((function(e){return S.solanaDerivationPath(e,0,X)})):[]}),[X]),z=ve.map((function(e){return{value:e,displayValue:y.DERIVATION_PATH_TYPE_TO_VALUE[e]}}));c.useEffect((function(){ce(void 0,void 0,void 0,e(i).mark((function t(){var r,a,o,c,l,u,d,s,p;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V&&M){e.next=2;break}return e.abrupt("return");case 2:R(!0),e.prev=3,r=[],a=!0,o=!1,c=void 0,e.prev=6,l=Z[Symbol.iterator]();case 8:if(a=(u=l.next()).done){e.next=17;break}return d=u.value,e.next=12,S.getPublicKeyAsync(n.transport,d);case 12:s=e.sent,r.push(s);case 14:a=!0,e.next=8;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(6),o=!0,c=e.t0;case 23:e.prev=23,e.prev=24,a||null==l.return||l.return();case 26:if(e.prev=26,!o){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return H(r),e.next=34,E.getMultipleAccountsAsync(M,r,"finalized");case 34:p=e.sent,O(p),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(3),w.telemetry.captureError(e.t1);case 41:return e.prev=41,R(!1),e.finish(41);case 44:case"end":return e.stop()}}),t,null,[[3,38,41,44],[6,19,23,31],[24,,26,30]])})))}),[n.transport,V,Z,M]),c.useEffect((function(){H([])}),[Z]),c.useEffect((function(){1===q.length&&f(0)}),[q]);var Q=q.map((function(n){var t,r=n.toString(),a=null===(t=F[n.toString()])||void 0===t?void 0:t.lamports,o=void 0!==a?T.formatTokenAmount(T.lamportsToSolana(a)):"0";return{displayValue:e(c).createElement(se,null,e(c).createElement("span",null,T.formatHashMedium(r,7)),e(c).createElement("label",null,o," SOL")),value:r}})),G=void 0===l||void 0===p,J=void 0!==p?q[p]:void 0;return e(c).createElement(me,null,e(c).createElement(de,{icon:e(c).createElement(B.AddIcon,null),primaryText:r("connectHardwareSelectAddressSelectWalletAddress"),headerStyle:D.IconHeaderStyle.Large}),e(c).createElement(ue,null,e(c).createElement($,{placeholderText:r("connectHardwareSelectAddressDerivationPath"),options:z,value:X,onChange:function(e,n){u(n)}}),e(c).createElement($,{placeholderText:j?r("connectHardwareSelectAddressSearching"):0===q.length?r("connectHardwareSelectAddressAllAddressesImported"):r("connectHardwareSelectAddressWalletAddress"),options:Q,value:null==J?void 0:J.toString(),onChange:function(e,n){f(n)}}),e(c).createElement(I.Button,{onClick:function(){if(void 0!==p){var t,r,a=q[p],o=P.map((function(e){return e.toString()})).indexOf(a.toString());t=a.toString(),r=o,ce(void 0,void 0,void 0,e(i).mark((function n(){var a,o,c;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V){e.next=2;break}return e.abrupt("return");case 2:return a=d.default(K,(function(e){var n=e.filter((function(e){return e.type===h.AccountType.Ledger})).length+1,a=Z[r].toString("hex");e.push({type:h.AccountType.Ledger,name:"Ledger ".concat(n),publicKey:t,derivationPath:a})})),o=a.length-1,k.analytics.capture("connectHardwareAddAccount"),U(a),c=new Y.LocalStorage,e.next=9,v.setSelectedAccountIndex(c,o);case 9:case"end":return e.stop()}}),n)}))),n.pushStep(e(c).createElement(ye,Object.assign({},n)))}},theme:"primary",disabled:G},r("connectHardwareAddAccountButton"))))},ye=function(){var n=g.useTranslation().t;return e(c).createElement(me,null,e(c).createElement(de,{icon:e(c).createElement(O.ConfirmationIcon,{defaultIcon:e(c).createElement("div",null),type:O.ConfirmationIconType.Success}),primaryText:n("connectHardwareFinishPrimaryText"),secondaryText:n("connectHardwareFinishSecondaryText"),headerStyle:D.IconHeaderStyle.Large}),e(c).createElement(I.Button,{onClick:function(){k.analytics.capture("connectHardwareFinishClick"),window.close()},theme:"primary"},n("pastParticipleDone")))};l.render(e(c).createElement(f.BrowserRouter,null,e(c).createElement(H.QueryProvider,null,e(c).createElement(pe,null))),document.getElementById("root")),k.analytics.capture("connectHardwareOpen")}();define=__define;})(window.define);