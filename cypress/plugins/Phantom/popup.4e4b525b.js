(function(define){var __define;"function"==typeof define&&define.amd&&(__define=define,define=null);
function e(e){return e&&e.__esModule?e.default:e}function t(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=o.parcelRequirea886;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},o.parcelRequirea886=a),a.register("hDM6n",(function(o,n){t(o.exports,"SolBalance",(function(){return u}));var r=a("aZikt"),s=a("cFuyE");const u=t=>{return void 0===t.children?null:e(r).createElement(e(r).Fragment,null,(o=t.children,n=t.format,s.formatTokenAmount(s.lamportsToSolana("string"==typeof o?Number(o):o),n))," SOL");var o,n}})),a.register("iZDso",(function(e,o){t(e.exports,"useRootGroupEffect",(function(){return v}),(function(e){return v=e})),t(e.exports,"useCaptureOpen",(function(){return S}),(function(e){return S=e}));var n=a("aZikt"),r=a("jveIc"),s=a("lwple"),u=a("dODMx"),i=a("8x0K0"),c=a("czDD7"),l=a("j1GR2"),f=a("41J1p"),d=a("eGDJt"),p=a("2wuJD"),g=a("1DdzG"),h=function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function s(e){try{i(n.next(e))}catch(e){a(e)}}function u(e){try{i(n.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,u)}i((n=n.apply(e,t||[])).next())}))};const y={"client-platform":"extension","client-version":g.getManifestVersion()},v=e=>{const[t]=l.useFeatureFlags(["root-group-extension-v2"]);(e=>{const{mutateAsync:t}=d.useStoreStorageValue(s.StorageKeys.RootHashes),{mutateAsync:o}=d.useClearStorageValue(s.StorageKeys.RootHashes),a=n.useCallback((()=>h(void 0,void 0,void 0,(function*(){try{const n=yield p.getMnemonic();if(!e||!n)return void o();switch(n.type){case"bip39":{const e=n.value.getEntropy(),o=i.genRootHash(e);e.fill(0),yield t([o]);break}case"deprecated":{const e=r.mnemonicToEntropy(n.value),o=i.genRootHash(e);e.fill(0),yield t([o]);break}}}catch(e){o()}}))),[e,t,o]);n.useEffect((()=>{a()}),[a])})(t),(e=>{const{data:t,isSuccess:o}=d.useFetchStorageValue(s.StorageKeys.RootHashes),{mutateAsync:r}=d.useStoreStorageValue(s.StorageKeys.RootGroup),{mutateAsync:a}=d.useClearStorageValue(s.StorageKeys.RootGroup),i=n.useCallback((()=>h(void 0,void 0,void 0,(function*(){if(o)try{const o=null!=t?t:[];if(!e||!o.length)return void a();const n=(yield u.fetchRootGroup(o,y)).rootGroup;yield r(n)}catch(e){a()}}))),[o,t,e,r,a]);n.useEffect((()=>{i()}),[i])})(t),(e=>{const{data:t,isSuccess:o}=d.useFetchStorageValue(s.StorageKeys.RootGroup),{data:r,isSuccess:a}=d.useFetchStorageValue(s.StorageKeys.IsAnalyticsOptedOut),u=o&&a,i=n.useCallback((()=>{if(!u)return;let o="";!r&&e&&(o=null!=t?t:""),o&&f.analytics.assignGroup("rootGroup",o)}),[r,e,u,t]);n.useEffect((()=>{i()}),[i])})(t),n.useEffect((()=>null==e?void 0:e()),[])},S=(e,t)=>{const o=n.useCallback((()=>h(void 0,void 0,void 0,(function*(){const o=yield c.getStorageValue(s.StorageKeys.IsAnalyticsOptedOut),n=yield c.getStorageValue(s.StorageKeys.RootGroup);let r="";o||(r=null!=n?n:""),r&&f.analytics.assignGroup("rootGroup",r),f.analytics.capture(e,t)}))),[e,t]);n.useEffect((()=>{o()}),[o])}})),a.register("dODMx",(function(e,o){t(e.exports,"fetchRootGroup",(function(){return c}),(function(e){return c=e}));var n=a("jEn2x"),r=a("lUIcg"),s=function(e,t,o,n){return new(o||(o=Promise))((function(r,a){function s(e){try{i(n.next(e))}catch(e){a(e)}}function u(e){try{i(n.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,u)}i((n=n.apply(e,t||[])).next())}))};const u="fb25ad6d-1a0d-4238-a329-2394017625ef",i={Accept:"application/json","Content-Type":"application/json","root-group-api-key":u},c=(e,t)=>s(void 0,void 0,void 0,(function*(){if(!u.length)throw new Error("Must have Root Group API key before fetching.");if(!e.length)throw new Error("Must send at least 1 root hash.");const o=yield fetch(`${n.getAPIEnvironment()}/root_group/v1`,{method:"POST",headers:t?Object.assign(Object.assign({},t),i):i,body:JSON.stringify({root_hashes:e})}),a=yield o.json();if(200!==o.status){if(r.isErrorResponse(a))throw new Error(a.message);throw new Error(`Unable to fetch root group with root hashes: ${e.toString()}`)}if((s=a)&&"string"==typeof s.root_group)return{rootGroup:a.root_group};var s;throw new Error(`Invalid root group response: ${null==a?void 0:a.toString()}`)}))})),a.register("8x0K0",(function(e,o){t(e.exports,"genRootHash",(function(){return s}));var n=a("lkm1S");const r=new Set([16,20,24,28,32]);function s(e){if(!r.has(e.length))throw Error(`Incorrect data length for RootHash:${e.length}`);return n.sha256(n.sha256(e)).slice(2,34)}}));define=__define;})(window.define);